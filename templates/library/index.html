{% extends 'library/base.html' %}

{% load staticfiles %}

{% block title %}{% endblock %}

{% block body_block %}


    {% if artists %}
    <div class="display_list">
        <ul>
            <!--Loops through the artist id and displays the all of the artist names.-->
            <!--Artist names link to a more detailed view that displays all the corresponding titles and the artist's country-->
            {% for artist in artists %}
                <table>
                    <tr>
                        <td><li>Artist: <a href="/library/artist/{{ artist.id }}">{{ artist.name }}</a></li></td>
                    </tr>
                        <th>Title(s):</th>
                           {% for record_title in artist.recordtitle_set.all %}
                               <tr>
                                   <td><li><a href="/library/record_title_detail/{{ record_title.id }}">{{ record_title }}</a></li></td>
                               </tr>

                           {% endfor %}

            {{ artist.full_name|upper }}<br/>
            {% endfor %}
                </table>

            <!--Pagination-->
            <div class="pagination">
                <span class="step-links">
                    {% if artists.has_previous %}
                        <a href="{{ prev_page_url }}">Previous</a>
                    {% endif %}
                    <span class="current">
                        Page {{ artists.number }} of {{ artists.paginator.num_pages }}
                    </span>

                    {% if artists.has_next %}
                    <a href="{{ next_page_url }}">Next</a>
                    {% endif %}
                    <form method="get" id="page_form">
                        <input type="text" name="page" id="page_input" placeholder="Go to page...">
                        <select name="artists" id="num_artists">
                            <option value="25">25 artists</option>
                            <option value="100">100 artists</option>
                            <option value="250">250 artists</option>
                        </select>
                        <input type="submit" id="page_input_button" value="Submit"
                               onclick="submitPaginationForm('page_form')">
                    </form>

                </span>
            </div>
        </ul>
    </div>
{% else %}
<strong>There are no artists present.</strong>
{% endif %}

<a href="{{ artist.url }}">{{ artist.name }}</a>

<script src="{% static "js/pagination.js" %}"></script>

<script>

//Adds better functionality to pagination
function preventDef(event) {
    event.preventDefault();
}

var oldEvt = window.onload;
window.onload = function () {
    if (oldEvt) oldEvt();
    setSelect('num_artists');
    var pageButton = document.getElementById('page_input_button');
    pageButton.addEventListener('click', submitPaginationForm('page_form'), false);
    document.getElementById('page_form').addEventListener('click', preventDef, false);
}

</script>

{% endblock %}